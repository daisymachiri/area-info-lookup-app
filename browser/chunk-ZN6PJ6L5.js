import{A as H,B as W,Ba as ct,C as $,D as z,F as N,G as V,H as B,I as U,J as j,L,N as A,P as J,Q as G,R as K,f as P,g as M,i as I,j as r,k as F,l as k,m as w,ma as q,o as f,oa as R,p as o,pa as Q,q as n,qa as X,r as y,ra as Y,s as E,sa as Z,t as b,ta as tt,u,ua as et,v as a,va as nt,w as S,wa as it,x as h,xa as ot,y as T,ya as at,z as D,za as rt}from"./chunk-IVAAJGYL.js";import"./chunk-UPM3M7IO.js";import"./chunk-RWIKZ4EE.js";import"./chunk-O3KLBS3A.js";import"./chunk-BLLCJXK6.js";import"./chunk-HC6MZPB3.js";import"./chunk-4PGTP63H.js";import"./chunk-E2X2OLWF.js";import"./chunk-FERD25SW.js";import"./chunk-7EU7YSXT.js";import"./chunk-LEIMCQKJ.js";import"./chunk-Y5XL4IAA.js";import"./chunk-MCRJI3T3.js";import"./chunk-JEGRCOPK.js";import"./chunk-XO6XPINI.js";import"./chunk-D5QFP226.js";import"./chunk-LN54NTR4.js";import"./chunk-FQ42KCOL.js";import"./chunk-JWIEPCRG.js";import"./chunk-BLK62YZ3.js";import"./chunk-ZWIP3AYQ.js";import"./chunk-LF5XB4YN.js";import"./chunk-E2BOY3YE.js";import"./chunk-3SN3MQ6X.js";import"./chunk-DWGPMRVG.js";import"./chunk-BZ2JL7UE.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import"./chunk-RW4GY4BD.js";function lt(c,l){c&1&&(o(0,"div",13),y(1,"ion-icon",14),o(2,"p"),a(3,"No cities added yet. Add a city to your favorites!"),n()())}function dt(c,l){if(c&1){let t=E();o(0,"li",16),b("click",function(){let i=P(t).$implicit,s=u(2);return M(s.selectFavorite(i))}),a(1),o(2,"ion-button",17),b("click",function(){let i=P(t).$implicit,s=u(2);return M(s.removeFromFavorites(i))}),a(3,"Remove"),n()()}if(c&2){let t=l.$implicit;r(),h(" ",t," ")}}function pt(c,l){if(c&1&&(o(0,"ul"),w(1,dt,4,1,"li",15),n()),c&2){let t=u();r(),f("ngForOf",t.favorites)}}function mt(c,l){if(c&1&&y(0,"img",24),c&2){let t=u(2);f("src","https://openweathermap.org/img/wn/"+t.weather.weather[0].icon+"@2x.png",I)}}function gt(c,l){if(c&1){let t=E();o(0,"div",18)(1,"ion-card",19)(2,"ion-card-header")(3,"ion-card-title"),a(4),n(),o(5,"p"),a(6),n()(),o(7,"ion-card-content")(8,"p")(9,"strong"),a(10,"Temperature:"),n(),a(11),n(),o(12,"p")(13,"strong"),a(14,"Humidity:"),n(),a(15),n(),w(16,mt,1,1,"img",20),o(17,"p")(18,"strong"),a(19,"Condition:"),n(),a(20),n(),o(21,"p")(22,"strong"),a(23,"Wind Speed:"),n(),a(24),n(),o(25,"ion-button",21),b("click",function(){P(t);let i=u();return M(i.toggleFavorite())}),y(26,"i",22),o(27,"span",23),a(28),n()()()()()}if(c&2){let t=u();r(4),T("",t.weather.name," - ",t.weather.sys.country,""),r(2),S(t.getFormattedDate()),r(5),h(" ",t.weather.main.temp,"\xB0C"),r(4),h(" ",t.weather.main.humidity,"%"),r(),f("ngIf",t.weather==null||t.weather.weather==null||t.weather.weather[0]==null?null:t.weather.weather[0].icon),r(4),h(" ",t.weather.weather[0].description,""),r(4),h(" ",t.weather.wind.speed," m/s"),r(2),f("ngClass",t.isFavorite()?"favorite":"not-favorite"),r(),f("ngClass",t.isFavorite()?"favorite":"not-favorite"),r(),h(" ",t.isFavorite()?"Added to Favorite":"Add to Favorite"," ")}}function ft(c,l){if(c&1&&(o(0,"div",28)(1,"p")(2,"strong"),a(3),$(4,"date"),n()(),y(5,"img",29),o(6,"p"),a(7),n(),o(8,"p"),a(9),n(),o(10,"p"),a(11),n()()),c&2){let t=l.$implicit;r(3),S(z(4,5,t.date,"EEE")),r(2),f("src","https://openweathermap.org/img/wn/"+t.icon+"@2x.png",I),r(2),h("Temp: ",t.temp,"\xB0C"),r(2),h("Wind: ",t.wind," m/s"),r(2),h("Humidity: ",t.humidity,"%")}}function ht(c,l){if(c&1&&(o(0,"div",25)(1,"ion-card",19)(2,"ion-card-header")(3,"ion-card-title"),a(4,"5-Day Weather Projection"),n()(),o(5,"ion-card-content")(6,"div",26),w(7,ft,12,8,"div",27),n()()()()),c&2){let t=u();r(7),f("ngForOf",t.forecast)}}var Mt=(()=>{let l=class l{constructor(e){this.http=e,this.city="",this.weather=null,this.forecast=[],this.favorites=[]}ngOnInit(){this.city="",this.loadFavorites(),this.fetchWeather("Johannesburg")}getFormattedDate(){let e=new Date,i={weekday:"long",day:"numeric",month:"long"};return e.toLocaleDateString("en-GB",i)}fetchWeather(e=this.city){let i="e7f87037686596e39a1727865cd409b4",s=`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=${i}&units=metric`,C=`https://api.openweathermap.org/data/2.5/forecast?q=${e}&appid=${i}&units=metric`;this.http.get(s).subscribe(d=>{this.weather=d},d=>{console.error("Error fetching weather data",d)}),this.http.get(C).subscribe(d=>{let p={};d.list.forEach(_=>{let m=new Date(_.dt_txt).toDateString();p[m]||(p[m]=[]),p[m].push(_)});let v=new Date().toDateString(),O=Object.keys(p).filter(_=>_!==v).slice(0,5);this.forecast=O.map(_=>{let m=p[_],g=m.find(x=>x.dt_txt.includes("12:00:00"))||m[0];return{date:new Date(g.dt_txt),temp:g.main.temp,wind:g.wind.speed,humidity:g.main.humidity,icon:g.weather[0].icon,description:g.weather[0].description}})},d=>{console.error("Error fetching forecast data",d)})}getCurrentLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{let i=e.coords.latitude,s=e.coords.longitude;this.fetchWeatherByCoordinates(i,s)},e=>{console.error("Error getting geolocation",e)}):console.log("Geolocation not supported.")}fetchWeatherByCoordinates(e,i){let s="e7f87037686596e39a1727865cd409b4",C=`https://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${i}&appid=${s}&units=metric`,d=`https://api.openweathermap.org/data/2.5/forecast?lat=${e}&lon=${i}&appid=${s}&units=metric`;this.http.get(C).subscribe(p=>{this.weather=p,this.city=this.weather.name},p=>{console.error("Error fetching weather data",p)}),this.http.get(d).subscribe(p=>{let v={};p.list.forEach(m=>{let g=new Date(m.dt_txt).toDateString();v[g]||(v[g]=[]),v[g].push(m)});let O=new Date().toDateString(),_=Object.keys(v).filter(m=>m!==O).slice(0,5);this.forecast=_.map(m=>{let g=v[m],x=g.find(st=>st.dt_txt.includes("12:00:00"))||g[0];return{date:new Date(x.dt_txt),temp:x.main.temp,wind:x.wind.speed,humidity:x.main.humidity,icon:x.weather[0].icon,description:x.weather[0].description}})},p=>{console.error("Error fetching forecast data",p)})}toggleFavorite(){var e;if((e=this.weather)!=null&&e.name){let i=this.weather.name;this.isFavorite(i)?this.removeFromFavorites(i):this.addToFavorites(i)}}isFavorite(e=(i=>(i=this.weather)==null?void 0:i.name)()){return this.favorites.includes(e)}addToFavorites(e){this.favorites.push(e),this.saveFavorites()}removeFromFavorites(e){this.favorites=this.favorites.filter(i=>i!==e),this.saveFavorites()}saveFavorites(){localStorage.setItem("favorites",JSON.stringify(this.favorites))}loadFavorites(){let e=localStorage.getItem("favorites");e&&(this.favorites=JSON.parse(e))}selectFavorite(e){this.city=e,this.fetchWeather()}};l.\u0275fac=function(i){return new(i||l)(F(L))},l.\u0275cmp=k({type:l,selectors:[["app-home"]],decls:27,vars:5,consts:[[1,"page-wrapper"],[1,"content-wrapper"],[1,"input-section",2,"flex","1"],["position","floating",1,"city-name",2,"padding-bottom","20px"],[1,"input-field"],["placeholder","E.g., Johannesburg",3,"ngModelChange","ngModel"],["expand","block",1,"button-solid","no-shadow",3,"click"],[2,"text-align","center","margin-top","10px","color","white"],[1,"favorite-cities"],["class","no-favorites",4,"ngIf"],[4,"ngIf"],["style","flex: 1;",4,"ngIf"],["class","forecast-wrapper",4,"ngIf"],[1,"no-favorites"],["name","add-circle-outline",2,"font-size","32px"],["style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],[2,"cursor","pointer",3,"click"],["fill","clear",2,"font-size","16px","color","red",3,"click"],[2,"flex","1"],[1,"custom-gradient-card"],["alt","Weather Icon","class","weather-icon",3,"src",4,"ngIf"],["fill","clear",1,"favorite-btn",3,"click"],[1,"fa-regular","fa-heart","heart-icon",3,"ngClass"],[1,"favorite-text",3,"ngClass"],["alt","Weather Icon",1,"weather-icon",3,"src"],[1,"forecast-wrapper"],[1,"forecast-grid"],["class","forecast-day",4,"ngFor","ngForOf"],[1,"forecast-day"],["alt","icon",1,"forecast-icon",3,"src"]],template:function(i,s){i&1&&(o(0,"div",0)(1,"ion-toolbar")(2,"ion-title"),a(3,"WEATHER LOOKUP"),n()(),o(4,"ion-content")(5,"div",1)(6,"div",2)(7,"ion-label",3),a(8,"Enter A City Name:"),n(),o(9,"ion-item",4)(10,"ion-input",5),W("ngModelChange",function(d){return H(s.city,d)||(s.city=d),d}),n()(),o(11,"ion-button",6),b("click",function(){return s.fetchWeather()}),a(12,"Get Weather"),n(),o(13,"div",7),a(14,"Or"),n(),o(15,"ion-button",6),b("click",function(){return s.getCurrentLocation()}),a(16,"Use Current Location"),n(),o(17,"div",8)(18,"ion-card")(19,"ion-card-header")(20,"ion-card-title"),a(21,"Favorite Cities"),n()(),o(22,"ion-card-content"),w(23,lt,4,0,"div",9)(24,pt,2,1,"ul",10),n()()()(),w(25,gt,29,11,"div",11),n(),w(26,ht,8,1,"div",12),n()()),i&2&&(r(10),D("ngModel",s.city),r(13),f("ngIf",s.favorites.length===0),r(),f("ngIf",s.favorites.length>0),r(),f("ngIf",s.weather),r(),f("ngIf",s.forecast.length>0))},dependencies:[j,N,V,B,U,K,J,G,A,ct,R,Q,X,Y,Z,tt,et,nt,it,ot,at,rt,q],styles:[".page-wrapper[_ngcontent-%COMP%]{background:#f9f9f9;min-height:100vh;display:flex;flex-direction:column;padding:1rem}@media (min-width: 768px){.page-wrapper[_ngcontent-%COMP%]{padding-left:200px;padding-right:200px}}.content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:1rem}@media (min-width: 768px){.content-wrapper[_ngcontent-%COMP%]{flex-direction:row}}ion-toolbar[_ngcontent-%COMP%]{--background: #999cdb !important;--color: #fff !important;text-align:center!important}ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-weight:600}ion-content[_ngcontent-%COMP%]{--padding-bottom: 20px;--background: #999cdb}.input-section[_ngcontent-%COMP%]{padding-top:20px}.city-name[_ngcontent-%COMP%]{color:#fff!important}.input-field[_ngcontent-%COMP%]{flex:1;margin-top:10px;height:40px}.input-field[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-size:14px;height:100%;--padding-top: 0px;--padding-bottom: 0px}ion-item[_ngcontent-%COMP%]{margin-bottom:16px;--background: #fff}.button-solid[_ngcontent-%COMP%]{--background: #999cdb;border:3px solid #f6bdbd}.no-shadow[_ngcontent-%COMP%]{--box-shadow: none !important;box-shadow:none!important}.favorite-btn[_ngcontent-%COMP%]{--width: 50px;--height: 50px;--background: transparent;padding:0;display:flex;justify-content:center;align-items:center}.favorite-btn[_ngcontent-%COMP%]   .favorite-text[_ngcontent-%COMP%]{font-size:16px;color:red;text-transform:none;transition:color .3s ease}.favorite-btn[_ngcontent-%COMP%]   .not-favorite-text[_ngcontent-%COMP%]{color:#000}.favorite-btn[_ngcontent-%COMP%]   .favorite-text.favorite[_ngcontent-%COMP%]{color:red}.favorite-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px;transition:color .3s ease}.favorite-btn[_ngcontent-%COMP%]   .favorite[_ngcontent-%COMP%]{color:red}.favorite-btn[_ngcontent-%COMP%]   .not-favorite[_ngcontent-%COMP%]{color:#000}.favorite-cities[_ngcontent-%COMP%]{margin-top:20px}.favorite-cities[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}.favorite-cities[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid #ddd}.favorite-cities[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.favorite-cities[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{font-size:14px;color:red;padding:0;margin:0;text-transform:none;font-weight:700;transition:color .3s ease}.favorite-cities[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover{color:#8b0000}ion-card[_ngcontent-%COMP%]{background:linear-gradient(#999cdb,#f6bdbd);border-radius:16px;box-shadow:0 4px 12px #0000001a;margin-top:20px}ion-card-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#fff}ion-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0;font-size:16px;color:#333}.forecast-wrapper[_ngcontent-%COMP%]{margin:20px 0}.forecast-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;gap:12px}.forecast-day[_ngcontent-%COMP%]{flex:1;min-width:110px;text-align:center;background:linear-gradient(#f6bdbd,#999cdb);border-radius:12px;padding:10px;box-shadow:0 2px 6px #0000001a}.forecast-icon[_ngcontent-%COMP%]{width:50px;height:50px}"]});let c=l;return c})();export{Mt as HomePage};
